import{r as l,j as r,l as h,_ as f}from"./index-14b47ef6.js";import{g as p}from"./moonAndMusicImages-2741f710.js";import{g as u,b as j,u as S}from"./App-32a88932.js";import{A as w}from"./index-262c0d74.js";import{H as I}from"./index-fc43fbb1.js";import"./helpers-01b1bc81.js";import"./useIsUserLoggedIn-4177b816.js";const _=(e,t,s)=>{!e||!t||!s||localStorage.setItem(encodeURIComponent(e)+encodeURIComponent(t),JSON.stringify(s))},v=(e,t)=>{const s=localStorage.getItem(encodeURIComponent(e)+encodeURIComponent(t));try{return JSON.parse(s)}catch(o){return console.log(o),{}}};async function R(e,t){var o,a;const s=v(e,t);if(s)return s;try{const c=await u.get("https://musicbrainz.org/ws/2/recording/",{params:{query:`artist:${e} AND recording:${t}`,fmt:"json",limit:1}});if(c.data.recordings.length===0)throw new Error("No recordings found for the given artist and title.");const n=c.data.recordings[0],x=n.releases[0].id,i=await u.get(`http://coverartarchive.org/release/${x}`).catch(g=>{console.error("cover art not found",g)}),d={artist:n["artist-credit"][0].artist.name,title:n.title,album:n.releases[0].title,duration:n.length,releaseDate:n.releases[0].date,coverArt:(a=(o=i==null?void 0:i.data)==null?void 0:o.images)!=null&&a[0]?i.data.images[0].image:null};return _(e,t,d),d}catch(c){console.error("Error fetching song info:",c)}}async function y(...e){return new Promise(t=>{setTimeout(()=>t(R(...e)),500)})}function A({title:e,artist:t,albumArtSrc:s=p(),className:o}){const[a,c]=l.useState({});return l.useEffect(()=>{e&&t&&y(t,e).then(n=>{console.log({title:e,artist:t,info:n}),n&&c(n)}).catch(n=>{console.log(n)})},[e,t]),r.jsxs("div",{className:j("flex w-[85vw] sm:w-full min-w-[200px] sm:min-w-[280px] h-[80px] gap-1 items-center bg-neutral-800 rounded-sm overflow-hidden",o),children:[r.jsx(w,{className:"h-full w-[80px]",src:(a==null?void 0:a.coverArt)||s}),r.jsxs("div",{className:"flex flex-col justify-center h-full ml-2",children:[r.jsx("h5",{className:"font-semibold text-md text-neutral-50/80",children:(a==null?void 0:a.title)||e}),r.jsx("h5",{className:"text-xs text-neutral-300/80",children:t})]})]})}const m=l.memo(A),C=h(()=>f(()=>import("./HomeSection-69595049.js"),["assets/HomeSection-69595049.js","assets/index-14b47ef6.js","assets/index-3b856831.css"])),N=h(()=>f(()=>import("./HorizontalList-7633f30f.js"),["assets/HorizontalList-7633f30f.js","assets/index-14b47ef6.js","assets/index-3b856831.css","assets/App-32a88932.js"]));function O(){var t,s;const{data:e}=S("/music/song");return r.jsx(l.Suspense,{fallback:r.jsx(I,{}),children:r.jsx(C,{title:"Celestial catalog!",children:r.jsxs(N,{className:"gap-3 mb-2 sm:px-3",children:[(s=(t=e==null?void 0:e.data)==null?void 0:t.songs)==null?void 0:s.map(o=>r.jsx("li",{children:r.jsx(m,{artist:o.artist,title:o==null?void 0:o.title})},o==null?void 0:o.title)),r.jsx("li",{children:r.jsx(m,{artist:"Hardwell",title:"Spaceman"})}),r.jsx("li",{children:r.jsx(m,{artist:"AP Dhillon",title:"Majhail"})})]})})})}export{O as default};
