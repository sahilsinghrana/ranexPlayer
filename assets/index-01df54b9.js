import{r as m,j as e,c as De,A as Te,g as Ve,R as ye,l as U,_ as W,u as Le,f as Ce,L as Y,a as Oe,s as ke}from"./index-1a08429f.js";import{f as Me}from"./favoritePlaylist-4cd647fb.js";import{M as Pe}from"./MoonLoader-72c322c8.js";import{w as Fe,a as Ue,S as We,s as He,c as qe,i,b as ze,g as Ge,U as me,d as xe,e as V,f as Ke,u as J,h as $e,I as ge,r as Be,j as Re,m as Ye}from"./index-c4965f9e.js";function Je({title:r,artist:l,albumArtSrc:o=Ve(),className:d}){return e.jsxs("div",{className:De("flex w-[85vw] sm:w-full min-w-[200px] sm:min-w-[280px] h-[80px] gap-1 items-center bg-neutral-800 rounded-sm overflow-hidden",d),children:[e.jsx(Te,{className:"h-full w-[80px]",src:o}),e.jsxs("div",{className:"flex flex-col justify-center h-full ml-2",children:[e.jsx("h5",{className:"font-semibold text-md text-neutral-50/80",children:r}),e.jsx("h5",{className:"text-xs text-neutral-300/80",children:l})]})]})}const F=m.memo(Je),je=ye.use||(r=>{if(r.status==="pending")throw r;if(r.status==="fulfilled")return r.value;throw r.status==="rejected"?r.reason:(r.status="pending",r.then(l=>{r.status="fulfilled",r.value=l},l=>{r.status="rejected",r.reason=l}),r)}),Q={dedupe:!0},Qe=(r,l,o)=>{const{cache:d,compare:_,suspense:E,fallbackData:ee,revalidateOnMount:y,revalidateIfStale:L,refreshInterval:C,refreshWhenHidden:te,refreshWhenOffline:se,keepPreviousData:Ee}=o,[O,pe,p,ve]=We.get(d),[t,ae]=He(r),H=m.useRef(!1),N=m.useRef(!1),k=m.useRef(t),q=m.useRef(l),z=m.useRef(o),c=()=>z.current,G=()=>c().isVisible()&&c().isOnline(),[v,K,Se,_e]=qe(d,t),D=m.useRef({}).current,be=i(ee)?o.fallback[t]:ee,re=(s,a)=>{for(const f in D){const n=f;if(n==="data"){if(!_(s[n],a[n])&&(!i(s[n])||!_(P,a[n])))return!1}else if(a[n]!==s[n])return!1}return!0},ne=m.useMemo(()=>{const s=(()=>!t||!l?!1:i(y)?c().isPaused()||E?!1:i(L)?!0:L:y)(),a=h=>{const R=Ye(h);return delete R._k,s?{isValidating:!0,isLoading:!0,...R}:R},f=v(),n=_e(),g=a(f),I=f===n?g:a(n);let u=g;return[()=>{const h=a(v());return re(h,u)?(u.data=h.data,u.isLoading=h.isLoading,u.isValidating=h.isValidating,u.error=h.error,u):(u=h,h)},()=>I]},[d,t]),b=ze.useSyncExternalStore(m.useCallback(s=>Se(t,(a,f)=>{re(f,a)||s()}),[d,t]),ne[0],ne[1]),ie=!H.current,we=O[t]&&O[t].length>0,w=b.data,A=i(w)?be:w,M=b.error,le=m.useRef(A),P=Ee?i(w)?le.current:w:A,oe=(()=>we&&!i(M)?!1:ie&&!i(y)?y:c().isPaused()?!1:E?i(A)?!1:L:i(A)||L)(),ce=!!(t&&l&&ie&&oe),Ae=i(b.isValidating)?ce:b.isValidating,Ie=i(b.isLoading)?ce:b.isLoading,T=m.useCallback(async s=>{const a=q.current;if(!t||!a||N.current||c().isPaused())return!1;let f,n,g=!0;const I=s||{},u=!p[t]||!I.dedupe,h=()=>Re?!N.current&&t===k.current&&H.current:t===k.current,R={isValidating:!1,isLoading:!1},de=()=>{K(R)},fe=()=>{const x=p[t];x&&x[1]===n&&delete p[t]},he={isValidating:!0};i(v().data)&&(he.isLoading=!0);try{if(u&&(K(he),o.loadingTimeout&&i(v().data)&&setTimeout(()=>{g&&h()&&c().onLoadingSlow(t,o)},o.loadingTimeout),p[t]=[a(ae),Ge()]),[f,n]=p[t],f=await f,u&&setTimeout(fe,o.dedupingInterval),!p[t]||p[t][1]!==n)return u&&h()&&c().onDiscarded(t),!1;R.error=me;const x=pe[t];if(!i(x)&&(n<=x[0]||n<=x[1]||x[1]===0))return de(),u&&h()&&c().onDiscarded(t),!1;const j=v().data;R.data=_(j,f)?j:f,u&&h()&&c().onSuccess(f,t,o)}catch(x){fe();const j=c(),{shouldRetryOnError:$}=j;j.isPaused()||(R.error=x,u&&h()&&(j.onError(x,t,j),($===!0||xe($)&&$(x))&&(!c().revalidateOnFocus||!c().revalidateOnReconnect||G())&&j.onErrorRetry(x,t,j,Ne=>{const B=O[t];B&&B[0]&&B[0](V.ERROR_REVALIDATE_EVENT,Ne)},{retryCount:(I.retryCount||0)+1,dedupe:!0})))}return g=!1,de(),!0},[t,d]),ue=m.useCallback((...s)=>Ke(d,k.current,...s),[]);if(J(()=>{q.current=l,z.current=o,i(w)||(le.current=w)}),J(()=>{if(!t)return;const s=T.bind(me,Q);let a=0;const n=$e(t,O,(g,I={})=>{if(g==V.FOCUS_EVENT){const u=Date.now();c().revalidateOnFocus&&u>a&&G()&&(a=u+c().focusThrottleInterval,s())}else if(g==V.RECONNECT_EVENT)c().revalidateOnReconnect&&G()&&s();else{if(g==V.MUTATE_EVENT)return T();if(g==V.ERROR_REVALIDATE_EVENT)return T(I)}});return N.current=!1,k.current=t,H.current=!0,K({_k:ae}),oe&&(i(A)||ge?s():Be(s)),()=>{N.current=!0,n()}},[t]),J(()=>{let s;function a(){const n=xe(C)?C(v().data):C;n&&s!==-1&&(s=setTimeout(f,n))}function f(){!v().error&&(te||c().isVisible())&&(se||c().isOnline())?T(Q).then(a):a()}return a(),()=>{s&&(clearTimeout(s),s=-1)}},[C,te,se,t]),m.useDebugValue(P),E&&i(A)&&t){if(!Re&&ge)throw new Error("Fallback data is required when using suspense in SSR.");q.current=l,z.current=o,N.current=!1;const s=ve[t];if(!i(s)){const a=ue(s);je(a)}if(i(M)){const a=T(Q);i(P)||(a.status="fulfilled",a.value=!0),je(a)}else throw M}return{mutate:ue,get data(){return D.data=!0,P},get error(){return D.error=!0,M},get isValidating(){return D.isValidating=!0,Ae},get isLoading(){return D.isLoading=!0,Ie}}},Xe=Ue(Qe),Ze=r=>(l,o,d)=>(d.revalidateOnFocus=!1,d.revalidateIfStale=!1,d.revalidateOnReconnect=!1,r(l,o,d)),et=Fe(Xe,Ze),X=U(()=>W(()=>import("./HomeSection-7dd84d76.js"),["assets/HomeSection-7dd84d76.js","assets/index-1a08429f.js","assets/index-594b9eb4.css"])),tt=U(()=>W(()=>import("./UserGreeting-8bf31acf.js"),["assets/UserGreeting-8bf31acf.js","assets/index-1a08429f.js","assets/index-594b9eb4.css"])),S=U(()=>W(()=>import("./index-1a08429f.js").then(r=>r.a0),["assets/index-1a08429f.js","assets/index-594b9eb4.css"])),Z=U(()=>W(()=>import("./HorizontalList-5a74b2b7.js"),["assets/HorizontalList-5a74b2b7.js","assets/index-1a08429f.js","assets/index-594b9eb4.css"])),it=()=>{var o,d,_;const r=Le(ke),{data:l}=et("/music/playlist",Ce);return console.log({playlistData:(o=l==null?void 0:l.data)==null?void 0:o.data}),e.jsx(m.Suspense,{fallback:e.jsx(Pe,{}),children:e.jsx("div",{className:"relative w-full",children:e.jsxs("div",{className:"h-full overflow-auto",children:[e.jsx(tt,{}),e.jsx(X,{children:e.jsxs(Z,{children:[r&&e.jsx(Y,{to:"/playlists/favorites",children:e.jsx("li",{children:e.jsx(S,{size:"adaptive",backgroundImage:Me,className:"object-scale-down object-center",playlistName:"Favourites"})})}),(_=(d=l==null?void 0:l.data)==null?void 0:d.data)==null?void 0:_.map(E=>e.jsx("li",{children:e.jsx(Y,{to:`/playlists/${E.id}`,children:e.jsx(S,{size:"adaptive",playlistName:E.title})})},E.id)),e.jsx("li",{children:e.jsx(Y,{to:"/playlists",children:e.jsx(S,{size:"adaptive",playlistName:"View More+",backgroundImage:Oe()})})})]})}),e.jsxs("h2",{className:"py-2 text-xs italic font-light tracking-wide text-center text-white opacity-60",children:["Get ",e.jsx("span",{className:"font-normal",children:"Dwelved"})," in the soul of the"," ",e.jsx("span",{className:"font-bold",children:"Sound"}),e.jsx("br",{})]}),e.jsx(X,{title:"Lists Curated by US!",children:e.jsxs(Z,{children:[e.jsx("li",{children:e.jsx(S,{playlistName:"Soothing"})}),e.jsx("li",{children:e.jsx(S,{playlistName:"Soulful"})}),e.jsx("li",{children:e.jsx(S,{playlistName:"Gold & Silver"})}),e.jsx("li",{children:e.jsx(S,{playlistName:"Rock the Party!"})})]})}),e.jsx(X,{title:"Recently Added!",children:e.jsxs(Z,{className:"gap-3 mb-2 sm:px-3",children:[e.jsx("li",{children:e.jsx(F,{artist:"Europe",title:"In my time"})}),e.jsx("li",{children:e.jsx(F,{artist:"Hardwell",title:"Spaceman"})}),e.jsx("li",{children:e.jsx(F,{artist:"AP Dhillon",title:"Majhail"})}),e.jsx("li",{children:e.jsx(F,{artist:"KK",title:"Tujhe Sochta hu"})})]})})]})})})};export{it as default};
