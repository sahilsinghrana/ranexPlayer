import{r as c,a as x,j as e,p as I,d as j,_ as u,e as C,h as L,i as g,k as $,l as b,u as v,m as w,L as M,P as R,n as T}from"./index-1126a3c5.js";import{d as E,f,g as V}from"./moonAndMusicImages-13d81755.js";import{c as z}from"./clsx.m-1229b3e0.js";import{t as B}from"./bundle-mjs-642c57ff.js";import{a as D,L as O}from"./react-icons.esm-da67b506.js";const F=()=>e.jsxs("div",{className:"w-full",children:[e.jsx(G,{}),e.jsx(H,{})]}),G=c.memo(()=>{const[t]=x(j),s=(t==null?void 0:t.meta)||{};return e.jsx("input",{type:"range",min:0,value:s==null?void 0:s.currentTime,max:s==null?void 0:s.duration,className:"w-full py-0 mx-1 my-0 cursor-grab active:cursor-grabbing accent-accent-8 seekbar",onChange:a=>E(I.seek,150)(a.target.value)})}),H=()=>{const[t]=x(j),s=(t==null?void 0:t.meta)||{};return e.jsxs("div",{className:"flex justify-between w-full px-2 py-0 text-sm",children:[e.jsx("p",{children:f(s==null?void 0:s.currentTime)}),e.jsx("p",{children:f(s==null?void 0:s.duration)})]})},y=c.memo(F),W=c.lazy(()=>u(()=>import("./SongInfo-524df45c.js"),["assets/SongInfo-524df45c.js","assets/index-1126a3c5.js","assets/index-6d3c1545.css","assets/moonAndMusicImages-13d81755.js","assets/clsx.m-1229b3e0.js","assets/bundle-mjs-642c57ff.js","assets/react-icons.esm-da67b506.js"])),Q=c.lazy(()=>u(()=>import("./PlayerControls-213e5ba8.js"),["assets/PlayerControls-213e5ba8.js","assets/index-1126a3c5.js","assets/index-6d3c1545.css","assets/Button-03391216.js","assets/clsx.m-1229b3e0.js","assets/bundle-mjs-642c57ff.js","assets/react-icons.esm-da67b506.js"])),U=c.lazy(()=>u(()=>import("./MediaOptions-90831f2b.js"),["assets/MediaOptions-90831f2b.js","assets/index-1126a3c5.js","assets/index-6d3c1545.css","assets/react-icons.esm-da67b506.js","assets/Button-03391216.js","assets/clsx.m-1229b3e0.js","assets/bundle-mjs-642c57ff.js"]));function J(){return e.jsxs("div",{className:"px-4 py-3 place-content-center bg-neutral-950",children:[e.jsx(y,{}),e.jsxs("div",{className:"grid w-full grid-cols-3 ",children:[e.jsx(c.Suspense,{fallback:e.jsx(m,{}),children:e.jsx(W,{})}),e.jsx(c.Suspense,{fallback:e.jsx(m,{}),children:e.jsx(Q,{})}),e.jsx(c.Suspense,{fallback:e.jsx(m,{}),children:e.jsx(U,{})})]})]})}const m=()=>e.jsx("div",{children:"..."});function K(t){const a={r:0,g:0,b:0},r=document.createElement("canvas"),o=r.getContext&&r.getContext("2d"),n={r:0,g:0,b:0};let l,d=0,i=-4;if(!o)return a;const N=r.height=t.naturalHeight||t.offsetHeight||t.height,A=r.width=t.naturalWidth||t.offsetWidth||t.width;o.drawImage(t,0,0);try{l=o.getImageData(0,0,A,N)}catch{return a}const P=l.data.length;for(;(i+=5*4)<P;)++d,n.r+=l.data[i],n.g+=l.data[i+1],n.b+=l.data[i+2];return n.r=~~(n.r/d),n.g=~~(n.g/d),n.b=~~(n.b/d),n}function X(t,s,a){t/=255,s/=255,a/=255;const r=Math.max(t,s,a),o=Math.min(t,s,a);let n,l;const d=(r+o)/2;if(r===o)n=l=0;else{const i=r-o;switch(l=d>.5?i/(2-r-o):i/(r+o),r){case t:n=(s-a)/i+(s<a?6:0);break;case s:n=(a-t)/i+2;break;case a:n=(t-s)/i+4;break}n/=6}return[n*360,l*100,d*100]}function _(t,s,a){const[r,o]=X(t,s,a);return[r.toFixed(0),o.toFixed(0),"14"]}function h(t,s,a){return`rgb(${t},${s},${a})`}function k(t,s,a){return`hsl(${t}deg, ${s}%, ${a}%)`}function Y(t="",s="#000000",a="23%"){return`linear-gradient(0deg, ${s} ${a}, ${t} 100%)`}function Z(t="",s="#000000",a="23%"){return`linear-gradient(90deg, ${s} ${a}, ${t} 100%)`}function q({className:t}){const[s,a]=x(C),r=L(g);return c.useEffect(()=>{s||(async()=>{const o=await V();if(a(o),o){const n=document.createElement("img");n.src=o,n.onload=()=>{const l=K(n);console.log({imageColors:l}),r(l)}}})()},[a,s,r]),e.jsx("img",{className:B(z("bg-black h-14 w-14",t)),src:s,alt:"cover art"})}const ee=c.lazy(()=>u(()=>import("./SongInfo-524df45c.js"),["assets/SongInfo-524df45c.js","assets/index-1126a3c5.js","assets/index-6d3c1545.css","assets/moonAndMusicImages-13d81755.js","assets/clsx.m-1229b3e0.js","assets/bundle-mjs-642c57ff.js","assets/react-icons.esm-da67b506.js"])),S=c.lazy(()=>u(()=>import("./PlayerControls-213e5ba8.js"),["assets/PlayerControls-213e5ba8.js","assets/index-1126a3c5.js","assets/index-6d3c1545.css","assets/Button-03391216.js","assets/clsx.m-1229b3e0.js","assets/bundle-mjs-642c57ff.js","assets/react-icons.esm-da67b506.js"]));function te(){const[t]=$();return t.get("playerView")==="full"?e.jsx(ae,{}):e.jsx(se,{})}const p=()=>e.jsx("div",{children:"..."});function se(){const t=b(),s=v(),a=w(g);return e.jsx("div",{style:{backgroundColor:h(a.r,a.g,a.b),background:Z(k(..._(a.r,a.g,a.b)),h(a.r,a.g,a.b),"1%")},onClick:()=>{t.search.includes("playerView=full")||s((t.pathname.at(-1)==="/"?t.pathname.slice(0,t.pathname.length-2):t.pathname)+(t.search?t.search+"&":"?")+"playerView=full")},className:"py-2 pt-4 pl-3 bg-neutral-900",children:e.jsxs("div",{className:"grid w-full grid-cols-2 ",children:[e.jsx(c.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(ee,{})}),e.jsx(c.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(S,{})})]})})}function ae(){const t=b(),s=v(),a=w(g),[r,o,n]=_(a.r,a.g,a.b);return e.jsxs("div",{style:{background:Y(h(a.r,a.g,a.b)),backgroundColor:k(r,o,n)},className:"absolute top-0 grid w-full h-screen grid-cols-1 bg-neutral-600",children:[e.jsx("div",{className:"h-[10vh] p-6",children:e.jsx(D,{height:"30px",width:"30px",onClick:()=>{const l=new URLSearchParams(t.search);l.delete("playerView"),s(t.pathname+l.toString())}})}),e.jsx("div",{className:"h-[40vh] flex justify-center items-center",children:e.jsx(q,{className:"w-[40vh] h-[40vh] bg-black"})}),e.jsxs("div",{className:"flex flex-col items-center self-end w-full gap-6 p-4",children:[e.jsx("div",{className:"flex justify-between w-full",children:e.jsxs("div",{children:[e.jsx("h2",{className:"pl-1 text-lg font-bold",children:"Song Name"}),e.jsx("h3",{className:"pl-1 text-md font-base",children:"Artist"})]})}),e.jsx(y,{}),e.jsxs("div",{className:"grid w-full grid-cols-[minmax(30px,_1fr)_5fr_minmax(30px,_1fr)] justify-center items-center",children:[e.jsx("div",{}),e.jsx(S,{}),e.jsx("div",{className:"flex justify-end w-full",children:e.jsx(M,{to:"/now-playing",children:e.jsx("div",{className:"p-2 mx-1 text-white cursor-pointer ",children:e.jsx(O,{className:"w-[22px] h-[22px]"})})})})]})]})]})}const ne=t=>{const[s,a]=c.useState(!1);return c.useEffect(()=>{const r=window.matchMedia(t);r.matches!==s&&a(r.matches);const o=()=>a(r.matches);return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[s,t]),s};function re(){return ne("(max-width: 500px)")}const oe=()=>{const t=re();return e.jsx(R,{store:T,min:0,children:t?e.jsx(te,{}):e.jsx(J,{})})},he=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{q as N,he as i};
