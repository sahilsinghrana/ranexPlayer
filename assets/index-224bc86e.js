var j=Object.defineProperty;var P=(t,e,a)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var x=(t,e,a)=>(P(t,typeof e!="symbol"?e+"":e,a),a);import{c as i,d as f,j as s,u as E,r,_ as h,P as b}from"./index-4461e390.js";const _=()=>"mediaSession"in navigator,v=()=>navigator.mediaSession,S=t=>{_()&&(v().playbackState=t)};class A{constructor(){x(this,"seek",e=>{this.audioEl.currentTime=e});this.audioEl=new Audio,this.meta={}}attachListener(e,a){this.audioEl.addEventListener(e,a)}load(e){this.audioEl.src=e,this.audioEl.load()}loadAndPlay(e){this.load(e),this.audioEl.play()}play(){this.audioEl.play(),S("playing")}pause(){this.audioEl.pause(),S("paused")}changeVolume(e=0){this.audioEl.volume=e}}const l={INITIALIZED:"INITIALIZED",PLAYING:"PLAYING",STOPPED:"STOPPED",PAUSED:"PAUSED"},u=i(l.INITIALIZED),c=i(),I=i({id:""}),L=i([]),T=i();i({playerState:u,currentSong:c,currentPlaylist:I,queue:L});const o=f(),n=new A;n.attachListener("playing",()=>{o.set(u,()=>l.PLAYING)});n.attachListener("pause",()=>{o.set(u,()=>l.PAUSED)});n.attachListener("ended",()=>{o.set(u,()=>l.STOPPED)});n.attachListener("durationchange",()=>{o.set(c,(t={})=>({...t,meta:{...t.meta||{},duration:n.audioEl.duration}}))});n.attachListener("timeupdate",()=>{o.set(c,(t={})=>({meta:{...t.meta||{},currentTime:n.audioEl.currentTime}}))});n.attachListener("onvolumechange",()=>{console.log("onvolumechange",n.audioEl.volume),o.set(T,()=>n.audioEl.volume)});const y=t=>{const e=Number(t).toFixed(0),a=Math.floor(e%3600/60),d=e%60,m=String(a).padStart(2,"0"),g=String(d).padStart(2,"0");return`${m}:${g}`};function k(t,e){let a;return function(...d){const m=this;clearTimeout(a),a=setTimeout(()=>{t.apply(m,d)},e)}}const D=()=>s.jsxs("div",{className:"w-full",children:[s.jsx(N,{}),s.jsx(O,{})]}),N=()=>{const[t]=E(c),e=(t==null?void 0:t.meta)||{};return s.jsx("input",{type:"range",min:0,value:e==null?void 0:e.currentTime,max:e==null?void 0:e.duration,className:"w-full py-0 mx-1 my-0 cursor-grab active:cursor-grabbing accent-accent-8 seekbar",onChange:a=>k(n.seek,150)(a.target.value)})},O=()=>{const[t]=E(c),e=(t==null?void 0:t.meta)||{};return s.jsxs("div",{className:"flex justify-between w-full px-2 py-0 text-sm",children:[s.jsx("p",{children:y(e==null?void 0:e.currentTime)}),s.jsx("p",{children:y(e==null?void 0:e.duration)})]})},M=r.lazy(()=>h(()=>import("./SongInfo-ecea03d1.js"),["assets/SongInfo-ecea03d1.js","assets/index-4461e390.js","assets/index-00e65167.css","assets/index-33de9c45.js","assets/react-icons.esm-c1ccd9f7.js"])),w=r.lazy(()=>h(()=>import("./PlayerControls-e74598a4.js"),["assets/PlayerControls-e74598a4.js","assets/index-4461e390.js","assets/index-00e65167.css","assets/Button-c056e4df.js","assets/clsx.m-1229b3e0.js","assets/react-icons.esm-c1ccd9f7.js"])),V=r.lazy(()=>h(()=>import("./MediaOptions-156783a1.js"),["assets/MediaOptions-156783a1.js","assets/index-4461e390.js","assets/index-00e65167.css","assets/Button-c056e4df.js","assets/clsx.m-1229b3e0.js","assets/react-icons.esm-c1ccd9f7.js"])),z=()=>s.jsx(b,{store:o,min:0,children:s.jsxs("div",{className:"px-4 py-3 place-content-center bg-subtleBackground dark:bg-subtleBackgroundDark",children:[s.jsx(D,{}),s.jsxs("div",{className:"grid w-full grid-cols-3 ",children:[s.jsx(r.Suspense,{fallback:s.jsx(p,{}),children:s.jsx(M,{})}),s.jsx(r.Suspense,{fallback:s.jsx(p,{}),children:s.jsx(w,{})}),s.jsx(r.Suspense,{fallback:s.jsx(p,{}),children:s.jsx(V,{})})]})]})}),p=()=>s.jsx("div",{children:"..."}),F=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{l as a,u as b,T as c,F as i,n as p};
