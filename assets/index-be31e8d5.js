var f=Object.defineProperty;var g=(s,e,a)=>e in s?f(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a;var x=(s,e,a)=>(g(s,typeof e!="symbol"?e+"":e,a),a);import{c as l,d as _,r,u as E,j as t,_ as u,P}from"./index-5a1e1a62.js";const v=()=>"mediaSession"in navigator,I=()=>navigator.mediaSession,S=s=>{v()&&(I().playbackState=s)};class L{constructor(){x(this,"seek",e=>{this.audioEl.currentTime=e});this.audioEl=new Audio,this.meta={}}attachListener(e,a){this.audioEl.addEventListener(e,a)}load(e){this.audioEl.src=e,this.audioEl.load()}loadAndPlay(e){this.load(e),this.audioEl.play()}play(){this.audioEl.play(),S("playing")}pause(){this.audioEl.pause(),S("paused")}changeVolume(e=0){this.audioEl.volume=e}}const m={INITIALIZED:"INITIALIZED",PLAYING:"PLAYING",STOPPED:"STOPPED",PAUSED:"PAUSED"},p=l(m.INITIALIZED),d=l(),k=l({id:""}),A=l([]),T=l();l({playerState:p,currentSong:d,currentPlaylist:k,queue:A});const i=_(),n=new L;n.attachListener("playing",()=>{i.set(p,()=>m.PLAYING)});n.attachListener("pause",()=>{i.set(p,()=>m.PAUSED)});n.attachListener("ended",()=>{i.set(p,()=>m.STOPPED)});n.attachListener("durationchange",()=>{i.set(d,(s={})=>({...s,meta:{...s.meta||{},duration:n.audioEl.duration}}))});n.attachListener("timeupdate",()=>{i.set(d,(s={})=>({meta:{...s.meta||{},currentTime:n.audioEl.currentTime}}))});n.attachListener("onvolumechange",()=>{i.set(T,()=>n.audioEl.volume)});const j=s=>{const e=Number(s).toFixed(0),a=Math.floor(e%3600/60),o=e%60,c=String(a).padStart(2,"0"),b=String(o).padStart(2,"0");return`${c}:${b}`};function D(s,e){let a;return function(...o){const c=this;clearTimeout(a),a=setTimeout(()=>{s.apply(c,o)},e)}}const w=()=>t.jsxs("div",{className:"w-full",children:[t.jsx(M,{}),t.jsx(N,{})]}),M=r.memo(()=>{const[s]=E(d),e=(s==null?void 0:s.meta)||{};return t.jsx("input",{type:"range",min:0,value:e==null?void 0:e.currentTime,max:e==null?void 0:e.duration,className:"w-full py-0 mx-1 my-0 cursor-grab active:cursor-grabbing accent-accent-8 seekbar",onChange:a=>D(n.seek,150)(a.target.value)})}),N=()=>{const[s]=E(d),e=(s==null?void 0:s.meta)||{};return t.jsxs("div",{className:"flex justify-between w-full px-2 py-0 text-sm",children:[t.jsx("p",{children:j(e==null?void 0:e.currentTime)}),t.jsx("p",{children:j(e==null?void 0:e.duration)})]})},O=r.memo(w),z=r.lazy(()=>u(()=>import("./SongInfo-933c3435.js"),["assets/SongInfo-933c3435.js","assets/index-5a1e1a62.js","assets/index-af1ada3e.css","assets/index-dded29fe.js"])),B=r.lazy(()=>u(()=>import("./PlayerControls-2490df01.js"),["assets/PlayerControls-2490df01.js","assets/index-5a1e1a62.js","assets/index-af1ada3e.css","assets/Button-d00e30e3.js","assets/clsx.m-1229b3e0.js","assets/react-icons.esm-07268717.js"])),V=r.lazy(()=>u(()=>import("./MediaOptions-89eb93fa.js"),["assets/MediaOptions-89eb93fa.js","assets/index-5a1e1a62.js","assets/index-af1ada3e.css","assets/Button-d00e30e3.js","assets/clsx.m-1229b3e0.js","assets/react-icons.esm-07268717.js"]));function R(){return t.jsxs("div",{className:"px-4 py-3 place-content-center bg-subtleBackground dark:bg-subtleBackgroundDark",children:[t.jsx(O,{}),t.jsxs("div",{className:"grid w-full grid-cols-3 ",children:[t.jsx(r.Suspense,{fallback:t.jsx(h,{}),children:t.jsx(z,{})}),t.jsx(r.Suspense,{fallback:t.jsx(h,{}),children:t.jsx(B,{})}),t.jsx(r.Suspense,{fallback:t.jsx(h,{}),children:t.jsx(V,{})})]})]})}const h=()=>t.jsx("div",{children:"..."}),$=r.lazy(()=>u(()=>import("./SongInfo-933c3435.js"),["assets/SongInfo-933c3435.js","assets/index-5a1e1a62.js","assets/index-af1ada3e.css","assets/index-dded29fe.js"])),F=r.lazy(()=>u(()=>import("./PlayerControls-2490df01.js"),["assets/PlayerControls-2490df01.js","assets/index-5a1e1a62.js","assets/index-af1ada3e.css","assets/Button-d00e30e3.js","assets/clsx.m-1229b3e0.js","assets/react-icons.esm-07268717.js"]));function C(){return t.jsx("div",{className:"py-3 pt-5 pl-3 border border-b-neutral-600 border-neutral-950 bg-neutral-300 dark:bg-neutral-900",children:t.jsxs("div",{className:"grid w-full grid-cols-2 ",children:[t.jsx(r.Suspense,{fallback:t.jsx(y,{}),children:t.jsx($,{})}),t.jsx(r.Suspense,{fallback:t.jsx(y,{}),children:t.jsx(F,{})})]})})}const y=()=>t.jsx("div",{children:"..."}),G=s=>{const[e,a]=r.useState(!1);return r.useEffect(()=>{const o=window.matchMedia(s);o.matches!==e&&a(o.matches);const c=()=>a(o.matches);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[e,s]),e};function U(){return G("(max-width: 500px)")}const Y=()=>{const s=U();return t.jsx(P,{store:i,min:0,children:s?t.jsx(C,{}):t.jsx(R,{})})},Q=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"}));export{m as a,p as b,T as c,Q as i,n as p};
