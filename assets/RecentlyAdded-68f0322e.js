import{r as l,j as r,l as h,_ as x}from"./index-abf60e04.js";import{g as p}from"./moonAndMusicImages-2741f710.js";import{g as u,b as j,u as S}from"./App-83d83da7.js";import{A as w}from"./index-55b414b5.js";import{H as _}from"./index-ca3a99b1.js";import"./helpers-01b1bc81.js";import"./useIsUserLoggedIn-5fdc5c29.js";const v=(e,t,s)=>{!e||!t||!s||localStorage.setItem(encodeURIComponent(e)+encodeURIComponent(t),JSON.stringify(s))},I=(e,t)=>{const s=localStorage.getItem(encodeURIComponent(e)+encodeURIComponent(t));try{return JSON.parse(s)}catch(o){return console.log(o),{}}};async function R(e,t){var o,n;const s=I(e,t);if(s)return s;await(async()=>new Promise(c=>setTimeout(()=>{c()},500)))();try{const c=await u.get("https://musicbrainz.org/ws/2/recording/",{params:{query:`artist:${e} AND recording:${t}`,fmt:"json",limit:1}});if(c.data.recordings.length===0)throw new Error("No recordings found for the given artist and title.");const a=c.data.recordings[0],f=a.releases[0].id,i=await u.get(`http://coverartarchive.org/release/${f}`).catch(g=>{console.error("cover art not found",g)}),d={artist:a["artist-credit"][0].artist.name,title:a.title,album:a.releases[0].title,duration:a.length,releaseDate:a.releases[0].date,coverArt:(n=(o=i==null?void 0:i.data)==null?void 0:o.images)!=null&&n[0]?i.data.images[0].image:null};return v(e,t,d),d}catch(c){console.error("Error fetching song info:",c)}}function y({title:e,artist:t,albumArtSrc:s=p(),className:o}){const[n,c]=l.useState({});return l.useEffect(()=>{e&&t&&R(t,e).then(a=>{console.log({title:e,artist:t,info:a}),a&&c(a)}).catch(a=>{console.log(a)})},[e,t]),r.jsxs("div",{className:j("flex w-[85vw] sm:w-full min-w-[200px] sm:min-w-[280px] h-[80px] gap-1 items-center bg-neutral-800 rounded-sm overflow-hidden",o),children:[r.jsx(w,{className:"h-full w-[80px]",src:(n==null?void 0:n.coverArt)||s}),r.jsxs("div",{className:"flex flex-col justify-center h-full ml-2",children:[r.jsx("h5",{className:"font-semibold text-md text-neutral-50/80",children:(n==null?void 0:n.title)||e}),r.jsx("h5",{className:"text-xs text-neutral-300/80",children:t})]})]})}const m=l.memo(y),A=h(()=>x(()=>import("./HomeSection-fa8ca3bf.js"),["assets/HomeSection-fa8ca3bf.js","assets/index-abf60e04.js","assets/index-3b856831.css"])),C=h(()=>x(()=>import("./HorizontalList-cfeac12d.js"),["assets/HorizontalList-cfeac12d.js","assets/index-abf60e04.js","assets/index-3b856831.css","assets/App-83d83da7.js"]));function M(){var t,s;const{data:e}=S("/music/song");return r.jsx(l.Suspense,{fallback:r.jsx(_,{}),children:r.jsx(A,{title:"Celestial catalog!",children:r.jsxs(C,{className:"gap-3 mb-2 sm:px-3",children:[(s=(t=e==null?void 0:e.data)==null?void 0:t.songs)==null?void 0:s.map(o=>r.jsx("li",{children:r.jsx(m,{artist:o.artist,title:o==null?void 0:o.title})},o==null?void 0:o.title)),r.jsx("li",{children:r.jsx(m,{artist:"Hardwell",title:"Spaceman"})}),r.jsx("li",{children:r.jsx(m,{artist:"AP Dhillon",title:"Majhail"})})]})})})}export{M as default};
