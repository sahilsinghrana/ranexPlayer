var j=Object.defineProperty;var P=(t,e,a)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var S=(t,e,a)=>(P(t,typeof e!="symbol"?e+"":e,a),a);import{c as i,d as f,r as o,u as E,j as s,_ as h,P as b}from"./index-ee679bec.js";const _=()=>"mediaSession"in navigator,v=()=>navigator.mediaSession,x=t=>{_()&&(v().playbackState=t)};class A{constructor(){S(this,"seek",e=>{this.audioEl.currentTime=e});this.audioEl=new Audio,this.meta={}}attachListener(e,a){this.audioEl.addEventListener(e,a)}load(e){this.audioEl.src=e,this.audioEl.load()}loadAndPlay(e){this.load(e),this.audioEl.play()}play(){this.audioEl.play(),x("playing")}pause(){this.audioEl.pause(),x("paused")}changeVolume(e=0){this.audioEl.volume=e}}const l={INITIALIZED:"INITIALIZED",PLAYING:"PLAYING",STOPPED:"STOPPED",PAUSED:"PAUSED"},u=i(l.INITIALIZED),c=i(),I=i({id:""}),L=i([]),T=i();i({playerState:u,currentSong:c,currentPlaylist:I,queue:L});const r=f(),n=new A;n.attachListener("playing",()=>{r.set(u,()=>l.PLAYING)});n.attachListener("pause",()=>{r.set(u,()=>l.PAUSED)});n.attachListener("ended",()=>{r.set(u,()=>l.STOPPED)});n.attachListener("durationchange",()=>{r.set(c,(t={})=>({...t,meta:{...t.meta||{},duration:n.audioEl.duration}}))});n.attachListener("timeupdate",()=>{r.set(c,(t={})=>({meta:{...t.meta||{},currentTime:n.audioEl.currentTime}}))});n.attachListener("onvolumechange",()=>{console.log("onvolumechange",n.audioEl.volume),r.set(T,()=>n.audioEl.volume)});const y=t=>{const e=Number(t).toFixed(0),a=Math.floor(e%3600/60),d=e%60,m=String(a).padStart(2,"0"),g=String(d).padStart(2,"0");return`${m}:${g}`};function k(t,e){let a;return function(...d){const m=this;clearTimeout(a),a=setTimeout(()=>{t.apply(m,d)},e)}}const D=()=>s.jsxs("div",{className:"w-full",children:[s.jsx(N,{}),s.jsx(O,{})]}),N=o.memo(()=>{const[t]=E(c),e=(t==null?void 0:t.meta)||{};return s.jsx("input",{type:"range",min:0,value:e==null?void 0:e.currentTime,max:e==null?void 0:e.duration,className:"w-full py-0 mx-1 my-0 cursor-grab active:cursor-grabbing accent-accent-8 seekbar",onChange:a=>k(n.seek,150)(a.target.value)})}),O=()=>{const[t]=E(c),e=(t==null?void 0:t.meta)||{};return s.jsxs("div",{className:"flex justify-between w-full px-2 py-0 text-sm",children:[s.jsx("p",{children:y(e==null?void 0:e.currentTime)}),s.jsx("p",{children:y(e==null?void 0:e.duration)})]})},M=o.memo(D),w=o.lazy(()=>h(()=>import("./SongInfo-7b25c0fd.js"),["assets/SongInfo-7b25c0fd.js","assets/index-ee679bec.js","assets/index-25194eae.css","assets/index-ec1d1275.js","assets/react-icons.esm-8768f397.js"])),B=o.lazy(()=>h(()=>import("./PlayerControls-a16f5ba2.js"),["assets/PlayerControls-a16f5ba2.js","assets/index-ee679bec.js","assets/index-25194eae.css","assets/Button-8434db12.js","assets/clsx.m-1229b3e0.js","assets/react-icons.esm-8768f397.js"])),V=o.lazy(()=>h(()=>import("./MediaOptions-c685bc89.js"),["assets/MediaOptions-c685bc89.js","assets/index-ee679bec.js","assets/index-25194eae.css","assets/Button-8434db12.js","assets/clsx.m-1229b3e0.js","assets/react-icons.esm-8768f397.js"])),z=()=>s.jsx(b,{store:r,min:0,children:s.jsxs("div",{className:"px-4 py-3 place-content-center bg-subtleBackground dark:bg-subtleBackgroundDark",children:[s.jsx(M,{}),s.jsxs("div",{className:"grid w-full grid-cols-3 ",children:[s.jsx(o.Suspense,{fallback:s.jsx(p,{}),children:s.jsx(w,{})}),s.jsx(o.Suspense,{fallback:s.jsx(p,{}),children:s.jsx(B,{})}),s.jsx(o.Suspense,{fallback:s.jsx(p,{}),children:s.jsx(V,{})})]})]})}),p=()=>s.jsx("div",{children:"..."}),G=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{l as a,u as b,T as c,G as i,n as p};
